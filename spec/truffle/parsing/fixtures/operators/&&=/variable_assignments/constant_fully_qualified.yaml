subject: "&&="
description: "Variable assignment/fully qualified constant (A::B &&= c)"
notes: >
  `A::B &&= c` is translated into `A::B && A::B = c`
yarp_specific: true # evaluate parent (FOO::) only once and cache its value into a local variable
focused_on_node: "org.truffleruby.language.defined.DefinedWrapperNode"
ruby: |
  FOO::BAR &&= 42
ast: |
  DefinedWrapperNode
      attributes:
          definition = assignment
          flags = 1
      children:
          child =
              SequenceNode
                  attributes:
                      flags = 0
                  children:
                      body = [
                          WriteLocalVariableNode
                              attributes:
                                  flags = 0
                                  frameSlot = 2 # %value_0
                              children:
                                  valueNode =
                                      ReadConstantWithLexicalScopeNode
                                          attributes:
                                              flags = 0
                                              lexicalScope =  :: Object
                                              name = "FOO"
                                          children:
                                              getConstantNode =
                                                  GetConstantNodeGen
                                              lookupConstantNode =
                                                  LookupConstantWithLexicalScopeNodeGen
                                                      attributes:
                                                          lexicalScope =  :: Object
                                                          name = "FOO"
                          AndNodeGen
                              attributes:
                                  flags = 0
                              children:
                                  left =
                                      ReadConstantNode
                                          attributes:
                                              flags = 0
                                              name = "BAR"
                                          children:
                                              moduleNode =
                                                  ReadLocalVariableNode
                                                      attributes:
                                                          flags = 0
                                                          frameSlot = 2 # %value_0
                                                          type = FRAME_LOCAL
                                  right =
                                      WriteConstantNode
                                          attributes:
                                              flags = 0
                                              name = "BAR"
                                          children:
                                              moduleNode =
                                                  ReadLocalVariableNode
                                                      attributes:
                                                          flags = 0
                                                          frameSlot = 2 # %value_0
                                                          type = FRAME_LOCAL
                                              valueNode =
                                                  IntegerFixnumLiteralNode
                                                      attributes:
                                                          flags = 0
                                                          value = 42
                      ]